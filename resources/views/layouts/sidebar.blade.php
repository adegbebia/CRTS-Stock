<div id="sidebar"
    class="fixed top-0 bottom-0 left-0 w-64 
           bg-red-200 p-6 transition-all duration-300 
           overflow-y-auto border-r border-blue-300">
    <ul class="space-y-4 text-blue-900">

        @php
            $role = auth()->user()->roles->first()->name ?? '';
            $magasin = auth()->user()->magasin_affecte ?? '';

            function menuSection($title, $items)
            {
                echo '<li>';
                echo '<h3 class="mt-6 mb-2 text-xs font-semibold text-blue-700 uppercase tracking-wider px-2">' .
                    $title .
                    '</h3>';
                echo '<ul class="space-y-1">';
                foreach ($items as $item) {
                    echo '<li>';
                    echo '<a href="' .
                        route($item['route']) .
                        '" class="flex items-center px-3 py-2 rounded-lg text-sm font-medium text-blue-900 hover:bg-red-300 hover:text-blue-900 transition-colors">';
                    // Rendu direct du SVG
                    echo '<span class="mr-3">' . $item['icon'] . '</span>';
                    echo '<span>' . $item['label'] . '</span>';
                    echo '</a></li>';
                }
                echo '</ul>';
                echo '</li>';
                echo '<li><hr class="my-4 border-blue-400"></li>';
            }
        @endphp
        <a href="{{ route('dashboard') }}" class="btn btn-ghost  text-blue-900   hover:bg-red-300" title="Dashboard">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
            </svg>

            Dashboard
        </a>

        {{-- ADMIN --}}
        @if ($role === 'admin' && $magasin === 'admin')
            @php
                menuSection('Employés', [
                    [
                        'route' => 'users.index',
                        'icon' => '
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 " fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z" />
                </svg>
                ',
                        'label' => 'Employés',
                    ],
                ]);

                menuSection('Produits', [
                    [
                        'route' => 'produits.index',
                        'icon' => '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6 ">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
</svg>',
                        'label' => 'Produits',
                    ],
                    [
                        'route' => 'consommations-produits.index',
                        'icon' => '<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 " fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/>
    </svg>',
                        'label' => 'Consommation produits',
                    ],

                    [
                        'route' => 'mouvements-produits.index',
                        'icon' => '
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                            stroke-width="1.5" stroke="currentColor" class="size-6">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                                        </svg>
                ',
                        'label' => 'Mouvements produits',
                    ],
                    [
                        'route' => 'alertes-produits.index',
                        'icon' => '
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5" />
</svg>

                ',
                        'label' => 'Alertes produits',
                    ],
                    [
                        'route' => 'rapports-produits.index',
                        'icon' => '<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 " fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
    </svg>',
                        'label' => 'Rapports produits',
                    ],
                ]);

                menuSection('Articles', [
                    [
                        'route' => 'articles.index',
                        'icon' => '
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6 ">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M4 18h16M5 15h14M6 12h12M7 9h10M4 6h16"/>
        </svg>',
                        'label' => 'Articles',
                    ],

                    [
                        'route' => 'consommations-articles.index',
                        'icon' => '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/>
        </svg>',
                        'label' => 'Consommation articles',
                    ],
                    [
                        'route' => 'mouvements-articles.index',
                        'icon' => '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"/>
        </svg>',
                        'label' => 'Mouvements articles',
                    ],
                    [
                        'route' => 'alertes-articles.index',
                        'icon' => '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"/>
        </svg>',
                        'label' => 'Alertes articles',
                    ],
                    [
                        'route' => 'rapports-articles.index',
                        'icon' => '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
        </svg>',
                        'label' => 'Rapports articles',
                    ],
                ]);

            @endphp
        @endif



        {{-- MAGASINIER TECHNIQUE --}}
        @if ($role === 'magasinier_technique' && $magasin === 'technique')
            @php
                menuSection('Produits', [
                    ['route' => 'produits.index', 'icon' => 'flaticon-shopping-basket', 'label' => 'Produits'],
                    [
                        'route' => 'consommations-produits.index',
                        'icon' => 'flaticon-food',
                        'label' => 'Consommation produits',
                    ],
                    [
                        'route' => 'mouvements-produits.index',
                        'icon' => 'flaticon-arrow',
                        'label' => 'Mouvements produits',
                    ],
                    [
                        'route' => 'alertes-produits.index',
                        'icon' => 'flaticon-warning-sign',
                        'label' => 'Alertes produits',
                    ],
                    ['route' => 'rapports-produits.index', 'icon' => 'flaticon-report', 'label' => 'Rapports produits'],
                    ['route' => 'users.index', 'icon' => 'flaticon-user', 'label' => 'Employés'],
                ]);
            @endphp
        @endif

        {{-- MAGASINIER COLLATION --}}
        @if ($role === 'magasinier_collation' && $magasin === 'collation')
            @php
                menuSection('Articles', [
                    ['route' => 'articles.index', 'icon' => 'flaticon-article', 'label' => 'Articles'],
                    [
                        'route' => 'consommations-articles.index',
                        'icon' => 'flaticon-food',
                        'label' => 'Consommation articles',
                    ],
                    [
                        'route' => 'mouvements-articles.index',
                        'icon' => 'flaticon-arrow',
                        'label' => 'Mouvements articles',
                    ],
                    [
                        'route' => 'alertes-articles.index',
                        'icon' => 'flaticon-warning-sign',
                        'label' => 'Alertes articles',
                    ],
                    ['route' => 'rapports-articles.index', 'icon' => 'flaticon-report', 'label' => 'Rapports articles'],
                    ['route' => 'users.index', 'icon' => 'flaticon-user', 'label' => 'Employés'],
                ]);
            @endphp
        @endif
    </ul>
</div>
